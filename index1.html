<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–ò Help Desk - –°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 600;
        }

        .language-selector {
            display: flex;
            gap: 10px;
        }

        .language-selector button {
            padding: 8px 16px;
            border: 2px solid white;
            background: transparent;
            color: white;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .language-selector button.active {
            background: white;
            color: #667eea;
        }

        .language-selector button:hover {
            background: rgba(255,255,255,0.2);
        }

        .chat-area {
            height: 500px;
            overflow-y: auto;
            padding: 30px;
            background: #f8f9fa;
        }

        .message {
            margin-bottom: 20px;
            display: flex;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            justify-content: flex-end;
        }

        .message-content {
            max-width: 70%;
            padding: 15px 20px;
            border-radius: 18px;
            line-height: 1.5;
            font-size: 15px;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-bottom-right-radius: 5px;
        }

        .message.ai .message-content {
            background: white;
            color: #333;
            border: 1px solid #e0e0e0;
            border-bottom-left-radius: 5px;
        }

        .message.system .message-content {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffc107;
            max-width: 100%;
            text-align: center;
        }

        .typing-indicator {
            display: none;
            padding: 15px 20px;
            background: white;
            border-radius: 18px;
            border: 1px solid #e0e0e0;
            width: fit-content;
        }

        .typing-indicator.active {
            display: block;
        }

        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #999;
            margin: 0 2px;
            animation: typing 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        .input-area {
            padding: 25px 30px;
            background: white;
            border-top: 1px solid #e0e0e0;
            display: flex;
            gap: 15px;
        }

        #user-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 15px;
            outline: none;
            transition: border-color 0.3s;
        }

        #user-input:focus {
            border-color: #667eea;
        }

        #send-btn {
            padding: 15px 35px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        #send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        #send-btn:active {
            transform: translateY(0);
        }

        #send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .category-badge {
            display: inline-block;
            padding: 4px 12px;
            background: #e7f3ff;
            color: #0066cc;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-top: 8px;
        }

        .welcome-message {
            text-align: center;
            color: #666;
            padding: 40px 20px;
        }

        .welcome-message h2 {
            color: #333;
            margin-bottom: 15px;
        }

        .welcome-message p {
            margin-bottom: 10px;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            background: #f8f9fa;
            border-top: 1px solid #e0e0e0;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì –°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞</h1>
            <div class="language-selector">
                <button class="lang-btn active" data-lang="ru">–†—É—Å—Å–∫–∏–π</button>
                <button class="lang-btn" data-lang="kk">“ö–∞–∑–∞“õ—à–∞</button>
            </div>
        </div>

        <div class="chat-area" id="chat-area">
            <div class="welcome-message">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
                <p>–Ø –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞. –ú–æ–≥—É –ø–æ–º–æ—á—å –≤–∞–º —Å:</p>
                <p>üìö –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö</p>
                <p>üìù –í–æ–ø—Ä–æ—Å–∞–º–∏ –æ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏</p>
                <p>üåç –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–º —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–µ</p>
                <p>üèõÔ∏è 3D-—Ç—É—Ä–æ–º –ø–æ –∫–∞–º–ø—É—Å—É</p>
                <p>‚öñÔ∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ–º –≤—É–∑–æ–≤</p>
            </div>
            <div class="typing-indicator" id="typing">
                <span></span><span></span><span></span>
            </div>
        </div>

        <div class="input-area">
            <input 
                type="text" 
                id="user-input" 
                placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å..."
                autocomplete="off"
            >
            <button id="send-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="total-questions">0</div>
                <div class="stat-label">–í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="auto-resolved">0</div>
                <div class="stat-label">–†–µ—à–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="accuracy">0%</div>
                <div class="stat-label">–¢–æ—á–Ω–æ—Å—Ç—å</div>
            </div>
        </div>
    </div>

    <script>
        // üîë –í–°–¢–ê–í–¨–¢–ï –í–ê–® API –ö–õ–Æ–ß –ó–î–ï–°–¨
        const API_KEY = '–í–°–¢–ê–í–¨–¢–ï_–í–ê–®_API_–ö–õ–Æ–ß_–°–Æ–î–ê';
        
        let currentLanguage = 'ru';
        let stats = {
            totalQuestions: 0,
            autoResolved: 0,
            escalated: 0
        };

        // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤—É–∑–æ–≤ –ê–ª–º–∞—Ç—ã
        const universities = {
            '–∫–∞–∑–Ω—É': {
                name: '–ö–∞–∑–ù–£ –∏–º. –∞–ª—å-–§–∞—Ä–∞–±–∏',
                programs: ['–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã', '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞', '–§–∏–∑–∏–∫–∞', '–ë–∏–æ–ª–æ–≥–∏—è'],
                rating: 4.8,
                tuition: '1,200,000 —Ç–≥/–≥–æ–¥',
                website: 'kaznu.kz'
            },
            '–∫–∏–º—ç–ø': {
                name: '–ö–ò–ú–≠–ü',
                programs: ['–ë–∏–∑–Ω–µ—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ', '–≠–∫–æ–Ω–æ–º–∏–∫–∞', '–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è'],
                rating: 4.7,
                tuition: '3,500,000 —Ç–≥/–≥–æ–¥',
                website: 'kimep.kz'
            },
            'satbayev': {
                name: 'Satbayev University',
                programs: ['–ù–µ—Ñ—Ç–µ–≥–∞–∑–æ–≤–æ–µ –¥–µ–ª–æ', '–ì–æ—Ä–Ω–æ–µ –¥–µ–ª–æ', '–ú–µ—Ç–∞–ª–ª—É—Ä–≥–∏—è', 'IT'],
                rating: 4.6,
                tuition: '1,500,000 —Ç–≥/–≥–æ–¥',
                website: 'satbayev.university'
            },
            '–∞—É—ç—Å': {
                name: '–ê–£–≠–°',
                programs: ['–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞', '–≠–ª–µ–∫—Ç—Ä–æ—Ç–µ—Ö–Ω–∏–∫–∞', '–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è'],
                rating: 4.5,
                tuition: '900,000 —Ç–≥/–≥–æ–¥',
                website: 'aues.kz'
            }
        };

        const SYSTEM_PROMPT = `
–¢—ã - –ò–ò –ø–æ–º–æ—â–Ω–∏–∫ —Å–ª—É–∂–±—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞. –û—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É.

–í–£–ó–´ –ê–õ–ú–ê–¢–´ (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è):
1. –ö–∞–∑–ù–£ –∏–º. –∞–ª—å-–§–∞—Ä–∞–±–∏ - —Ä–µ–π—Ç–∏–Ω–≥ 4.8, —Å—Ç–æ–∏–º–æ—Å—Ç—å 1,200,000 —Ç–≥/–≥–æ–¥
   –ü—Ä–æ–≥—Ä–∞–º–º—ã: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã, –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –§–∏–∑–∏–∫–∞, –ë–∏–æ–ª–æ–≥–∏—è
2. –ö–ò–ú–≠–ü - —Ä–µ–π—Ç–∏–Ω–≥ 4.7, —Å—Ç–æ–∏–º–æ—Å—Ç—å 3,500,000 —Ç–≥/–≥–æ–¥
   –ü—Ä–æ–≥—Ä–∞–º–º—ã: –ë–∏–∑–Ω–µ—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ, –≠–∫–æ–Ω–æ–º–∏–∫–∞, –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è
3. Satbayev University - —Ä–µ–π—Ç–∏–Ω–≥ 4.6, —Å—Ç–æ–∏–º–æ—Å—Ç—å 1,500,000 —Ç–≥/–≥–æ–¥
   –ü—Ä–æ–≥—Ä–∞–º–º—ã: –ù–µ—Ñ—Ç–µ–≥–∞–∑–æ–≤–æ–µ –¥–µ–ª–æ, –ì–æ—Ä–Ω–æ–µ –¥–µ–ª–æ, –ú–µ—Ç–∞–ª–ª—É—Ä–≥–∏—è, IT
4. –ê–£–≠–° - —Ä–µ–π—Ç–∏–Ω–≥ 4.5, —Å—Ç–æ–∏–º–æ—Å—Ç—å 900,000 —Ç–≥/–≥–æ–¥
   –ü—Ä–æ–≥—Ä–∞–º–º—ã: –≠–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞, –≠–ª–µ–∫—Ç—Ä–æ—Ç–µ—Ö–Ω–∏–∫–∞, –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

–ö–ê–¢–ï–ì–û–†–ò–ò –í–û–ü–†–û–°–û–í:
1. –û–± —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ - –º–∏—Å—Å–∏—è, –∏—Å—Ç–æ—Ä–∏—è, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
2. –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã - —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏, –∫—É—Ä—Å—ã
3. –ü—Ä–∏—ë–º –∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ - –¥–æ–∫—É–º–µ–Ω—Ç—ã, —Å—Ä–æ–∫–∏, —Å—Ç–∏–ø–µ–Ω–¥–∏–∏
4. 3D-—Ç—É—Ä - –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏
5. –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–µ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ - –ø—Ä–æ–≥—Ä–∞–º–º—ã –æ–±–º–µ–Ω–∞
6. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—É–∑–æ–≤ - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º (–∏—Å–ø–æ–ª—å–∑—É–π –¥–∞–Ω–Ω—ã–µ –≤—ã—à–µ!)

–ü–†–ê–í–ò–õ–ê:
- –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –æ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ –≤—É–∑–æ–≤ - –∏—Å–ø–æ–ª—å–∑—É–π –¥–∞–Ω–Ω—ã–µ –æ –≤—É–∑–∞—Ö –ê–ª–º–∞—Ç—ã
- –ï—Å–ª–∏ –º–æ–∂–µ—à—å –æ—Ç–≤–µ—Ç–∏—Ç—å - –æ—Ç–≤–µ—á–∞–π —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ï—Å–ª–∏ –Ω—É–∂–µ–Ω —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç - –Ω–∞–ø–∏—à–∏ "–≠–°–ö–ê–õ–ê–¶–ò–Ø: [–Ω–æ–º–µ—Ä]"
- –í –∫–æ–Ω—Ü–µ –¥–æ–±–∞–≤—å: "–ö–ê–¢–ï–ì–û–†–ò–Ø: [–Ω–æ–º–µ—Ä]"

–ü–†–ò–ú–ï–†–´:

–í–æ–ø—Ä–æ—Å: "–°—Ä–∞–≤–Ω–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ IT –≤ –ö–∞–∑–ù–£ –∏ Satbayev"
–û—Ç–≤–µ—Ç: "–ö–∞–∑–ù–£ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—É '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã' (—Å—Ç–æ–∏–º–æ—Å—Ç—å 1,200,000 —Ç–≥, —Ä–µ–π—Ç–∏–Ω–≥ 4.8), –∞ Satbayev University - –ø—Ä–æ–≥—Ä–∞–º–º—É 'IT' –≤ —Å–æ—Å—Ç–∞–≤–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–µ–π (—Å—Ç–æ–∏–º–æ—Å—Ç—å 1,500,000 —Ç–≥, —Ä–µ–π—Ç–∏–Ω–≥ 4.6). –ö–∞–∑–ù–£ –±–æ–ª—å—à–µ —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Ç–µ–æ—Ä–∏–∏, Satbayev - –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∞—Å–ø–µ–∫—Ç–∞—Ö.
–ö–ê–¢–ï–ì–û–†–ò–Ø: 6"

–í–æ–ø—Ä–æ—Å: "–ö–∞–∫–∏–µ –µ—Å—Ç—å IT —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏?"
–û—Ç–≤–µ—Ç: "–í –Ω–∞—à–µ–º —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ –µ—Å—Ç—å: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã, –ö–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç, –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ü–û.
–ö–ê–¢–ï–ì–û–†–ò–Ø: 2"

–í–æ–ø—Ä–æ—Å: "–î–µ—Ç–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∞—Å–ø–µ–∫—Ç–æ–≤ –≤—É–∑–æ–≤"
–û—Ç–≤–µ—Ç: "–≠–°–ö–ê–õ–ê–¶–ò–Ø: 6 - –î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –Ω—É–∂–Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞."
`;

        const chatArea = document.getElementById('chat-area');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        const typingIndicator = document.getElementById('typing');
        const langButtons = document.querySelectorAll('.lang-btn');

        langButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                langButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentLanguage = btn.dataset.lang;
                userInput.placeholder = currentLanguage === 'ru' 
                    ? '–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å...' 
                    : '–°“±—Ä–∞“ì—ã“£—ã–∑–¥—ã –∂–∞–∑—ã“£—ã–∑...';
            });
        });

        sendBtn.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        async function sendMessage() {
            const message = userInput.value.trim();
            if (!message) return;

            if (API_KEY === 'AIzaSyDEvGanCscdmojBD3ovx6bJLfK6URir49U') {
                alert('‚ùå –í—Å—Ç–∞–≤—å—Ç–µ API –∫–ª—é—á!\n\n–ü–æ–ª—É—á–∏—Ç—å: https://makersuite.google.com/app/apikey');
                return;
            }

            addMessage(message, 'user');
            userInput.value = '';
            stats.totalQuestions++;
            updateStats();

            sendBtn.disabled = true;
            typingIndicator.classList.add('active');
            chatArea.scrollTop = chatArea.scrollHeight;

            try {
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}`,
                    {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{
                                    text: SYSTEM_PROMPT + '\n\n–í–æ–ø—Ä–æ—Å: ' + message
                                }]
                            }]
                        })
                    }
                );

                if (!response.ok) throw new Error('API Error');

                const data = await response.json();
                const aiResponse = data.candidates[0].content.parts[0].text;

                typingIndicator.classList.remove('active');
                analyzeResponse(aiResponse);

            } catch (error) {
                typingIndicator.classList.remove('active');
                addMessage('‚ùå –û—à–∏–±–∫–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á!', 'system');
                console.error(error);
            } finally {
                sendBtn.disabled = false;
            }
        }

        function analyzeResponse(aiResponse) {
            if (aiResponse.includes('–≠–°–ö–ê–õ–ê–¶–ò–Ø')) {
                stats.escalated++;
                const categoryMatch = aiResponse.match(/–≠–°–ö–ê–õ–ê–¶–ò–Ø:\s*(\d+)/);
                const category = categoryMatch ? categoryMatch[1] : '?';
                
                const categories = {
                    '1': '–û–± —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ',
                    '2': '–ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã',
                    '3': '–ü—Ä–∏—ë–º –∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ',
                    '4': '3D-—Ç—É—Ä',
                    '5': '–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–µ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ',
                    '6': '–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—É–∑–æ–≤'
                };
                
                const message = `‚úÖ –í–æ–ø—Ä–æ—Å –ø–µ—Ä–µ–¥–∞–Ω –≤ –æ—Ç–¥–µ–ª: "${categories[category]}"\n–¢–∏–∫–µ—Ç —Å–æ–∑–¥–∞–Ω. –û—Ç–≤–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤.`;
                addMessage(message, 'system');
                
            } else {
                stats.autoResolved++;
                let cleanResponse = aiResponse.replace(/–ö–ê–¢–ï–ì–û–†–ò–Ø:\s*\d+/g, '').trim();
                const categoryMatch = aiResponse.match(/–ö–ê–¢–ï–ì–û–†–ò–Ø:\s*(\d+)/);
                const category = categoryMatch ? categoryMatch[1] : null;
                addMessage(cleanResponse, 'ai', category);
            }
            updateStats();
        }

        function addMessage(text, sender, category = null) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.textContent = text;
            
            if (category && sender === 'ai') {
                const categories = {
                    '1': '–û–± —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ',
                    '2': '–ü—Ä–æ–≥—Ä–∞–º–º—ã',
                    '3': '–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ',
                    '4': '3D-—Ç—É—Ä',
                    '5': '–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–µ',
                    '6': '–°—Ä–∞–≤–Ω–µ–Ω–∏–µ'
                };
                const badge = document.createElement('div');
                badge.className = 'category-badge';
                badge.textContent = categories[category] || '–û–±—â–µ–µ';
                contentDiv.appendChild(badge);
            }
            
            messageDiv.appendChild(contentDiv);
            
            const welcomeMsg = chatArea.querySelector('.welcome-message');
            if (welcomeMsg) welcomeMsg.remove();
            
            chatArea.insertBefore(messageDiv, typingIndicator);
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        function updateStats() {
            document.getElementById('total-questions').textContent = stats.totalQuestions;
            document.getElementById('auto-resolved').textContent = stats.autoResolved;
            const accuracy = stats.totalQuestions > 0 
                ? Math.round((stats.autoResolved / stats.totalQuestions) * 100) 
                : 0;
            document.getElementById('accuracy').textContent = accuracy + '%';
        }

        userInput.focus();
    </script>
</body>
</html>